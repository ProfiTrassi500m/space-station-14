- type: entity
  parent: BaseItem
  id: M4A1_Stories
  name: "M4A1 Modular"
  description: "Штурмовая винтовка с системой креплений."
  components:
    - type: Item
      size: 5
      tags:
      - CaliberModular
      - WeaponRifle
      heldPrefix: "gun"
    - type: Gun
      fireRate: 10
      recoil: 0.5
      projectile: Bullet556mm
      ammoType: Ammo556mm
      maxAmmo: 30
      soundGunshot: /Audio/Weapons/Guns/rifle.ogg
      magazineSlot: "magazine_slot"
    - type: Ammo
      caliber: "5.56mm"
      tags:
      - Caliber556mm
    - type: WeaponModuleHolder
      slots:
        top_rail: {}
        muzzle: {}
    - type: ContainerContainer
      containers:
        magazine_slot: !type:Container
          maxSize: 1
          whitelist:
            components:
              - Ammo
            tags:
              - Caliber556mm

- type: entity
  parent: BaseItem
  id: Ammo556mm
  name: "5.56mm"
  components:
  - type: Sprite
    sprite: /Textures/Objects/Ammo/556mm.rsi
    layers:
    - state: icon
    - type: Stack
      count: 30
       max: 120
    - type: Ammo
      caliber: "5.56mm"
      projectile: Bullet556mm

- type: entity
  parent: BaseProjectile
  id: Bullet556mm
  name: "5.56x45mm пуля"
  description: "Стандартный боеприпас НАТО."
  components:
    - type: Projectile
      speed: 35
      damage: 18
      damageType: Piercing
      lifetime: 2.5
    - type: Physics
      bodyType: Dynamic
      mass: 0.004
    - type: Appearance
      visuals:
        - type: Sprite
          sprite: /Textures/Projectiles/bullet_556mm.rsi
          state: default

- type: entity
  parent: BaseItem
  id: AmmoBox556mm
  name: "Коробка 5.56мм (120 патронов)"
  description: "Герметичная упаковка патронов."
  components:
    - type: AmmoProvider
      caliber: "5.56mm"
      amount: 120
      packs:
        - type: Magazine556mm
          count: 4
    - type: Item
      size: 3
    - type: Sprite
      sprite: /Textures/Objects/Ammo/ammobox.rsi
      layers:
        - state: 556mm
  
- type: entity
  parent: BaseItem
  id: Magazine556mm
  name: "Обойма 5.56мм (30 патронов)"
  description: "Стандартный магазин для M4A1."
  components:
    - type: Ammo
      caliber: "5.56mm"
      count: 30
      max: 30  
    - type: Item
      size: 2  
    - type: Sprite
      sprite: /Textures/Objects/Magazines/556mm.rsi
      layers:
        - state: full